# Authentication Service

![Java](https://img.shields.io/badge/Java-21-orange) ![Spring Security](https://img.shields.io/badge/Spring_Security-6.0-green) ![JWT](https://img.shields.io/badge/JWT-Auth-red)

Микросервис, отвечающий за централизованную аутентификацию и авторизацию пользователей. Сервис управляет учетными данными, генерирует JWT-токены (Access и Refresh) и обеспечивает безопасность доступа к другим микросервисам.

## Стек технологий

* **Core:** Java 21, Spring Boot 3.5
* **Security:** Spring Security, BCrypt (хеширование паролей с уникальной солью)
* **Token:** JWT (JSON Web Tokens) — генерация и валидация
* **Database:** PostgreSQL (хранение учетных данных пользователей)
* **Containerization:** Docker

## Безопасность и Роли

Сервис реализует **Role-Based Access Control (RBAC)**. В JWT токены "зашиваются" ID пользователя и его роль для авторизации в других сервисах.

### Роли
1. **ADMIN**
   * Полный доступ ко всем эндпоинтам системы.
   * Может просматривать, удалять и обновлять любые сущности.
   * Управление статусами пользователей (активация/деактивация).
   * Просмотр всех заказов, карт и платежей.

2. **USER**
   * Доступ только к своим личным ресурсам (профиль, карты, заказы, платежи).

### Механизм работы
* **Аутентификация:** По логину и паролю.
* **Хранение паролей:** В отдельной базе данных, хешируются через BCrypt.
* **Токены:**
    * `Access Token`: Короткоживущий, для доступа к ресурсам.
    * `Refresh Token`: Долгоживущий, для обновления Access токена без повторного ввода пароля.

### Обработка ошибок

Реализован глобальный перехват исключений безопасности (`SecurityException`, `BadCredentialsException` и др.) с возвратом понятных сообщений об ошибках и соответствующих HTTP-статусов (401, 403).
